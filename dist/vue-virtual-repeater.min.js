var SsrVirtualScroller=function(t){"use strict";"undefined"!=typeof window&&function(t,e){if("IntersectionObserver"in t&&"IntersectionObserverEntry"in t&&"intersectionRatio"in t.IntersectionObserverEntry.prototype)"isIntersecting"in t.IntersectionObserverEntry.prototype||Object.defineProperty(t.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var i=[];r.prototype.THROTTLE_TIMEOUT=100,r.prototype.POLL_INTERVAL=null,r.prototype.USE_MUTATION_OBSERVER=!0,r.prototype.observe=function(t){if(!this._observationTargets.some(function(e){return e.element==t})){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},r.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},r.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},r.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},r.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter(function(t,e,i){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==i[e-1]})},r.prototype._parseRootMargin=function(t){var e=(t||"0px").split(/\s+/).map(function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}});return e[1]=e[1]||e[0],e[2]=e[2]||e[0],e[3]=e[3]||e[1],e},r.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(s(t,"resize",this._checkForIntersections,!0),s(e,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in t&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},r.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,o(t,"resize",this._checkForIntersections,!0),o(e,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},r.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),i=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(r){var s=r.element,o=l(s),h=this._rootContainsTarget(s),a=r.entry,c=e&&h&&this._computeTargetAndRootIntersection(s,i),u=r.entry=new n({time:t.performance&&performance.now&&performance.now(),target:s,boundingClientRect:o,rootBounds:i,intersectionRect:c});a?e&&h?this._hasCrossedThreshold(a,u)&&this._queuedEntries.push(u):a&&a.isIntersecting&&this._queuedEntries.push(u):this._queuedEntries.push(u)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},r.prototype._computeTargetAndRootIntersection=function(i,n){if("none"!=t.getComputedStyle(i).display){for(var r,s,o,h,c,u,d,f,v=l(i),m=a(i),g=!1;!g;){var p=null,_=1==m.nodeType?t.getComputedStyle(m):{};if("none"==_.display)return;if(m==this.root||m==e?(g=!0,p=n):m!=e.body&&m!=e.documentElement&&"visible"!=_.overflow&&(p=l(m)),p&&(r=p,s=v,void 0,void 0,void 0,void 0,void 0,void 0,o=Math.max(r.top,s.top),h=Math.min(r.bottom,s.bottom),c=Math.max(r.left,s.left),u=Math.min(r.right,s.right),f=h-o,!(v=(d=u-c)>=0&&f>=0&&{top:o,bottom:h,left:c,right:u,width:d,height:f})))break;m=a(m)}return v}},r.prototype._getRootRect=function(){var t;if(this.root)t=l(this.root);else{var i=e.documentElement,n=e.body;t={top:0,left:0,right:i.clientWidth||n.clientWidth,width:i.clientWidth||n.clientWidth,bottom:i.clientHeight||n.clientHeight,height:i.clientHeight||n.clientHeight}}return this._expandRectByRootMargin(t)},r.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map(function(e,i){return"px"==e.unit?e.value:e.value*(i%2?t.width:t.height)/100}),i={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return i.width=i.right-i.left,i.height=i.bottom-i.top,i},r.prototype._hasCrossedThreshold=function(t,e){var i=t&&t.isIntersecting?t.intersectionRatio||0:-1,n=e.isIntersecting?e.intersectionRatio||0:-1;if(i!==n)for(var r=0;r<this.thresholds.length;r++){var s=this.thresholds[r];if(s==i||s==n||s<i!=s<n)return!0}},r.prototype._rootIsInDom=function(){return!this.root||h(e,this.root)},r.prototype._rootContainsTarget=function(t){return h(this.root||e,t)},r.prototype._registerInstance=function(){i.indexOf(this)<0&&i.push(this)},r.prototype._unregisterInstance=function(){var t=i.indexOf(this);-1!=t&&i.splice(t,1)},t.IntersectionObserver=r,t.IntersectionObserverEntry=n}function n(t){this.time=t.time,this.target=t.target,this.rootBounds=t.rootBounds,this.boundingClientRect=t.boundingClientRect,this.intersectionRect=t.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,i=e.width*e.height,n=this.intersectionRect,r=n.width*n.height;this.intersectionRatio=i?r/i:this.isIntersecting?1:0}function r(t,e){var i,n,r,s=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(s.root&&1!=s.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(i=this._checkForIntersections.bind(this),n=this.THROTTLE_TIMEOUT,r=null,function(){r||(r=setTimeout(function(){i(),r=null},n))}),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(s.rootMargin),this.thresholds=this._initThresholds(s.threshold),this.root=s.root||null,this.rootMargin=this._rootMarginValues.map(function(t){return t.value+t.unit}).join(" ")}function s(t,e,i,n){"function"==typeof t.addEventListener?t.addEventListener(e,i,n||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,i)}function o(t,e,i,n){"function"==typeof t.removeEventListener?t.removeEventListener(e,i,n||!1):"function"==typeof t.detatchEvent&&t.detatchEvent("on"+e,i)}function l(t){var e;try{e=t.getBoundingClientRect()}catch(t){}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function h(t,e){for(var i=e;i;){if(i==t)return!0;i=a(i)}return!1}function a(t){var e=t.parentNode;return e&&11==e.nodeType&&e.host?e.host:e}}(window,document);var e=void 0;function i(){i.init||(i.init=!0,e=-1!==function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}var n=t.indexOf("Edge/");return n>0?parseInt(t.substring(n+5,t.indexOf(".",n)),10):-1}())}var n={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"resize-observer",attrs:{tabindex:"-1"}})},staticRenderFns:[],_scopeId:"data-v-b329ee4c",name:"resize-observer",methods:{notify:function(){this.$emit("notify")},addResizeHandlers:function(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.notify),this._w===this.$el.offsetWidth&&this._h===this.$el.offsetHeight||this.notify()},removeResizeHandlers:function(){this._resizeObject&&this._resizeObject.onload&&(!e&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.notify),delete this._resizeObject.onload)}},mounted:function(){var t=this;i(),this.$nextTick(function(){t._w=t.$el.offsetWidth,t._h=t.$el.offsetHeight});var n=document.createElement("object");this._resizeObject=n,n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.onload=this.addResizeHandlers,n.type="text/html",e&&this.$el.appendChild(n),n.data="about:blank",e||this.$el.appendChild(n)},beforeDestroy:function(){this.removeResizeHandlers()}};var r={version:"0.4.3",install:function(t){t.component("resize-observer",n)}},s=null;function o(t){if(null!==t&&"function"!=typeof t)throw new Error("observe-visibility directive expects a function as the value")}"undefined"!=typeof window?s=window.Vue:"undefined"!=typeof global&&(s=global.Vue),s&&s.use(r);var l={bind:function(t,e,i){var n=e.value;if("undefined"==typeof IntersectionObserver)console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/WICG/IntersectionObserver/tree/gh-pages/polyfill");else{o(n),t._vue_visibilityCallback=n;var r=t._vue_intersectionObserver=new IntersectionObserver(function(e){var i=e[0];t._vue_visibilityCallback&&t._vue_visibilityCallback.call(null,i.intersectionRatio>0,i)});i.context.$nextTick(function(){r.observe(t)})}},update:function(t,e){var i=e.value;o(i),t._vue_visibilityCallback=i},unbind:function(t){t._vue_intersectionObserver&&(t._vue_intersectionObserver.disconnect(),delete t._vue_intersectionObserver,delete t._vue_visibilityCallback)}};var h={version:"0.3.1",install:function(t){t.directive("observe-visibility",l)}},a=null;"undefined"!=typeof window?a=window.Vue:"undefined"!=typeof global&&(a=global.Vue),a&&a.use(h);var c=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},u=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),d=!1;function f(){for(var t,e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];d&&(t=console).log.apply(t,["[Virtual Scroller]:"].concat(i))}var v=function(){function t(){c(this,t),this._tree=[],this._revertedTree=!0}return u(t,[{key:Symbol.iterator,value:function(){var t=0;return{next:function(){return{value:this.sumAt(t++),done:t>=this._tree.length}}}}},{key:"update",value:function(t){var e=t.values,i=void 0===e?[]:e,n=t.from,r=void 0===n?0:n,s=t.to,o=void 0===s?i.length-1:s;if(this._assertEqual(o-r+1,i.length,"Received lengths must be equal"),this._assertEqual(i.length<=this._tree.length,!0,"Sub array must be less than original tree"),this._assertEqual(o-r>=0,!0,"`From` must be less than `to`"),f(r,o,i,"length:",i.length),f("original tree:",this._tree.slice()),this._revertedTree){for(var l=0,h=this._tree[o+1]||0,a=o,c=i.length-1;a>=r;--a)h+=i[c--],a===r&&(l=h-this._tree[r]),this._tree[a]=h;for(var u=r-1;u>=0;--u)this._tree[u]+=l}else{for(var d=0,v=this._tree[r-1]||0,m=r,g=0;m<=o;++m)v+=i[g++],m===o&&(d=v-this._tree[o]),this._tree[m]=v;for(var p=o+1;p<this._tree.length;++p)this._tree[p]+=d}f("modified tree:",this._tree.slice())}},{key:"sumAt",value:function(t){return this.sumBetween(0,t)}},{key:"sumBetween",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._tree.length-1;return this._revertedTree?this._tree[t]-(this._tree[e+1]||0):this._tree[e]-(this._tree[t-1]||0)}},{key:"extendBy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f("adding "+t+" elements"),this._tree=this._tree.concat(Array(t).fill(0));var i=Array(t).fill(e);this.update({from:this._tree.length-t,to:this._tree.length-1,values:i})}},{key:"reduceBy",value:function(t){if(f("reducing by "+t+" elements"),this._revertedTree)for(var e=this._tree[this._tree.length-t],i=this._tree.length-t-1;i>=0;--i)this._tree[i]-=e;this._tree.splice(-t)}},{key:"setPerformanceMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.descending;this._revertedTree=e===t.descending}},{key:"clear",value:function(){this._tree=[]}},{key:"_assertEqual",value:function(t,e,i){t!==e&&console.error(t,e,i)}}]),t}();v.descending=1,v.ascending=2;var m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(t.mainTag,{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:t.handleVisibilityChange,expression:"handleVisibilityChange"}],tag:"component",staticClass:"virtual-scroller",class:t.cssClass,style:t.itemContentStyle,on:{"&scroll":function(e){t.handleScroll(e)}}},[t._t("before-container"),t._v(" "),i(t.containerTag,{ref:"itemContainer",tag:"component",staticClass:"virtual-scroller__item-container",class:t.containerClass,style:t.itemContainerStyle},[t._t("before-content"),t._v(" "),i(t.contentTag,{ref:"items",tag:"component",staticClass:"virtual-scroller__items",class:t.contentClass,style:t.itemsStyle},[t.renderers?t._l(t.visibleItems,function(e,n){return i(t.renderers[e[t.typeField]],{key:t.keysEnabled&&e[t.keyField]||void 0,tag:"component",staticClass:"virtual-scroller__item",attrs:{item:e,"item-index":t.$_startIndex+n}})}):[t._l(t.visibleItems,function(e,i){return t._t("item",null,{item:e,itemIndex:t.$_startIndex+i,itemKey:t.keysEnabled&&e[t.keyField]||void 0})})]],2),t._v(" "),t._t("after-content")],2),t._v(" "),t._t("after-container"),t._v(" "),i("resize-observer",{on:{notify:t.handleResize}})],2)},staticRenderFns:[],name:"virtual-scroller",components:{ResizeObserver:n},directives:{ObserveVisibility:l},props:{items:{type:Array,required:!0},renderers:{default:null},itemHeight:{type:Number,default:null},maxContentHeight:{type:[Number,String],default:500},anyHeight:{type:Boolean,default:!1},typeField:{type:String,default:"type"},keyField:{type:String,default:"id"},heightField:{type:String,default:"height"},mainTag:{type:String,default:"div"},containerTag:{type:String,default:"div"},containerClass:{default:null},contentTag:{type:String,default:"div"},contentClass:{default:null},pageMode:{type:Boolean,default:!1},buffer:{type:[Number,String],default:200},poolSize:{type:[Number,String],default:2e3},prerender:{type:[Number,String],default:0},emitUpdate:{type:Boolean,default:!1},delayPreviousItems:{type:Boolean,default:!1}},data:function(){return{visibleItems:[],itemContainerStyle:null,itemsStyle:null,keysEnabled:!0}},computed:{cssClass:function(){return{"virtual-scroller_mode_page":this.pageMode}},itemContentStyle:function(){return{maxHeight:"number"==typeof this.maxContentHeight?this.maxContentHeight+"px":this.maxContentHeight}},isFloatingItemHeight:function(){return null===this.itemHeight||this.anyHeight}},watch:{items:{handler:function(){this.updateVisibleItems(!0)},deep:!0},pageMode:function(){this.applyPageMode(),this.updateVisibleItems(!0)},itemHeight:"setDirty"},created:function(){this.$_ready=!1,this.$_startIndex=0,this.$_oldScrollTop=null,this.$_oldScrollBottom=null,this.$_offsetTop=0,this.$_height=0,this.$_scrollDirty=!1,this.$_updateDirty=!1,this.$_heights=[],this.$_sumTree=new v,this.$_sumTree.setPerformanceMode(v.descending);var t=parseInt(this.prerender);t>0?(this.visibleItems=this.items.slice(0,t),this.$_length=this.visibleItems.length,this.$_endIndex=this.$_length-1,this.$_skip=!0):(this.$_endIndex=0,this.$_length=0,this.$_skip=!1)},mounted:function(){var t=this;this.applyPageMode(),this.$nextTick(function(){t.updateVisibleItems(!0),t.$_ready=!0})},beforeDestroy:function(){this.removeWindowScroll(),this.$_heights=[],this.$_sumTree.clear()},methods:{getScroll:function(){var t=this.$el,e=void 0;if(this.pageMode){var i=t.getBoundingClientRect(),n=-i.top,r=window.innerHeight;n<0&&(r+=n,n=0),n+r>i.height&&(r=i.height-n),e={top:n,bottom:n+r}}else e={top:t.scrollTop,bottom:t.scrollTop+t.clientHeight};return e.bottom>=0&&e.top<=e.bottom?e:null},updateVisibleItems:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$_updateDirty||(this.$_updateDirty=!0,this.$nextTick(function(){t.$_updateDirty=!1;var i,n,r=t.items.length,s=t.getScroll(),o=t.items;if(s){var l,h,a=parseInt(t.buffer),c=parseInt(t.poolSize),u=~~(s.top/c)*c-a,d=Math.ceil(s.bottom/c)*c+a;if(e||!(u===t.$_oldScrollTop&&d===t.$_oldScrollBottom||t.$_skip)){t.$_oldScrollTop=u,t.$_oldScrollBottom=d;var f=t.computeFrameOptions({scrollTop:u,scrollBottom:d});l=f.startIndex,h=f.endIndex,n=f.offsetTop,i=f.containerHeight,(e||t.$_startIndex!==l||t.$_endIndex!==h||t.$_offsetTop!==n||t.$_height!==i||t.$_length!==r)&&(t.keysEnabled=!(l>t.$_endIndex||h<t.$_startIndex),t.itemContainerStyle={height:i+"px"},t.itemsStyle={marginTop:n+"px"},t.delayPreviousItems?(t.visibleItems=o.slice(t.$_startIndex,h),t.$nextTick(function(){t.visibleItems=o.slice(l,h)})):t.visibleItems=o.slice(l,h),t.emitUpdate&&t.$emit("update",l,h),t.$_startIndex=l,t.$_endIndex=h,t.$_length=r,t.$_offsetTop=n,t.$_height=i,t.isFloatingItemHeight&&t.$nextTick(function(){t.updateDynamicItemsHeights()}))}else t.$_skip=!1}}))},computeFrameOptions:function(t){var e=t.scrollTop,i=t.scrollBottom,n=this.items.length,r=void 0,s=void 0,o=-1,l=-1;if(this.isFloatingItemHeight){this.$_heights.length!==this.items.length&&this.updateHeightsLength();var h=0,a=n-1,c=~~(n/2),u=void 0;do{u=c,this.$_sumTree.sumAt(c)<e?h=c:c<n&&this.$_sumTree.sumAt(c+1)>e&&(a=c),c=~~((h+a)/2)}while(c!==u);for(c<0&&(c=0),o=c,l=c;l<n&&this.$_sumTree.sumAt(l)<i;l++);-1===l?l=this.items.length-1:++l>n&&(l=n),r=this.$_sumTree.sumAt(c-1),s=this.$_sumTree.sumAt(n-1)}else o=~~(e/this.itemHeight),l=Math.ceil(i/this.itemHeight),o<0&&(o=0),l>n&&(l=n),r=o*this.itemHeight,s=n*this.itemHeight;return{startIndex:o,endIndex:l,offsetTop:r,containerHeight:s}},updateHeightsLength:function(){var t=this.items.length-this.$_heights.length;if(t>0){var e=Array(t).fill(this.itemHeight||50);this.$_heights=this.$_heights.concat(e),this.$_sumTree.extendBy(t,this.itemHeight||50)}else this.$_heights.splice(t),this.$_sumTree.reduceBy(Math.abs(t))},updateDynamicItemsHeights:function(){for(var t=this.$refs.items.children,e=!1,i=0,n=this.visibleItems.length;i<n;++i)if(t&&t[i]){var r=t[i].offsetHeight,s=this.$_startIndex+i;this.$_heights[s]!==r&&(e=!0,this.$_heights[s]=r)}var o=[this.$_startIndex,this.$_startIndex+this.visibleItems.length-1],l=o[0],h=o[1];e&&l<h&&this.$_sumTree.update({from:l,to:h,values:this.$_heights.slice(l,h+1)})},scrollToItem:function(t){var e=void 0;e=this.isFloatingItemHeight?this.$_sumTree.sumAt(t-1):t*this.itemHeight,this.$el.scrollTop=e},setDirty:function(){this.$_oldScrollTop=null,this.$_oldScrollBottom=null},applyPageMode:function(){this.pageMode?this.addWindowScroll():this.removeWindowScroll()},addWindowScroll:function(){window.addEventListener("scroll",this.handleScroll,!0),window.addEventListener("resize",this.handleResize)},removeWindowScroll:function(){window.removeEventListener("scroll",this.handleScroll,!0),window.removeEventListener("resize",this.handleResize)},handleScroll:function(){var t=this;this.$_scrollDirty||(this.$_scrollDirty=!0,requestAnimationFrame(function(){t.$_scrollDirty=!1,t.updateVisibleItems()}))},handleResize:function(){this.$emit("resize"),this.$_ready&&this.updateVisibleItems()},handleVisibilityChange:function(t,e){var i=this;this.$_ready&&(t||0!==e.boundingClientRect.width||0!==e.boundingClientRect.height)&&(this.$emit("visible"),this.$nextTick(function(){i.updateVisibleItems()}))}}};var g={version:"1.1.7",install:function(t,e){var i=Object.assign({},{installComponents:!0,componentsPrefix:""},e);i.installComponents&&function(t,e){t.component(e+"virtual-scroller",m)}(t,i.componentsPrefix)}},p=null;return"undefined"!=typeof window?p=window.Vue:"undefined"!=typeof global&&(p=global.Vue),p&&p.use(g),t.VirtualScroller=m,t.default=g,t}({});
