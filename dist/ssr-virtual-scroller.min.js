var SsrVirtualScroller=function(e){"use strict";var t=void 0;function i(){i.init||(i.init=!0,t=-1!==function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}var n=e.indexOf("Edge/");return n>0?parseInt(e.substring(n+5,e.indexOf(".",n)),10):-1}())}var n={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"resize-observer",attrs:{tabindex:"-1"}})},staticRenderFns:[],_scopeId:"data-v-b329ee4c",name:"resize-observer",methods:{notify:function(){this.$emit("notify")},addResizeHandlers:function(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.notify),this._w===this.$el.offsetWidth&&this._h===this.$el.offsetHeight||this.notify()},removeResizeHandlers:function(){this._resizeObject&&this._resizeObject.onload&&(!t&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.notify),delete this._resizeObject.onload)}},mounted:function(){var e=this;i(),this.$nextTick(function(){e._w=e.$el.offsetWidth,e._h=e.$el.offsetHeight});var n=document.createElement("object");this._resizeObject=n,n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.onload=this.addResizeHandlers,n.type="text/html",t&&this.$el.appendChild(n),n.data="about:blank",t||this.$el.appendChild(n)},beforeDestroy:function(){this.removeResizeHandlers()}};var s={version:"0.4.3",install:function(e){e.component("resize-observer",n)}},r=null;function l(e){if(null!==e&&"function"!=typeof e)throw new Error("observe-visibility directive expects a function as the value")}"undefined"!=typeof window?r=window.Vue:"undefined"!=typeof global&&(r=global.Vue),r&&r.use(s);var o={bind:function(e,t,i){var n=t.value;if("undefined"==typeof IntersectionObserver)console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/WICG/IntersectionObserver/tree/gh-pages/polyfill");else{l(n),e._vue_visibilityCallback=n;var s=e._vue_intersectionObserver=new IntersectionObserver(function(t){var i=t[0];e._vue_visibilityCallback&&e._vue_visibilityCallback.call(null,i.intersectionRatio>0,i)});i.context.$nextTick(function(){s.observe(e)})}},update:function(e,t){var i=t.value;l(i),e._vue_visibilityCallback=i},unbind:function(e){e._vue_intersectionObserver&&(e._vue_intersectionObserver.disconnect(),delete e._vue_intersectionObserver,delete e._vue_visibilityCallback)}};var a={version:"0.3.1",install:function(e){e.directive("observe-visibility",o)}},h=null;"undefined"!=typeof window?h=window.Vue:"undefined"!=typeof global&&(h=global.Vue),h&&h.use(a);var d=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=!1;function f(){for(var e,t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];c&&(e=console).log.apply(e,["[Virtual Scroller]:"].concat(i))}var v=function(){function e(){d(this,e),this._tree=[],this._revertedTree=!0}return u(e,[{key:Symbol.iterator,value:function(){var e=0;return{next:function(){return{value:this.sumAt(e++),done:e>=this._tree.length}}}}},{key:"update",value:function(e){var t=e.values,i=void 0===t?[]:t,n=e.from,s=void 0===n?0:n,r=e.to,l=void 0===r?i.length-1:r;if(this._assertEqual(l-s+1,i.length,"Received lengths must be equal"),this._assertEqual(i.length<=this._tree.length,!0,"Sub array must be less than original tree"),this._assertEqual(l-s>=0,!0,"`From` must be less than `to`"),f(s,l,i,"length:",i.length),f("original tree:",this._tree.slice()),this._revertedTree){for(var o=0,a=this._tree[l+1]||0,h=l,d=i.length-1;h>=s;--h)a+=i[d--],h===s&&(o=a-this._tree[s]),this._tree[h]=a;for(var u=s-1;u>=0;--u)this._tree[u]+=o}else{for(var c=0,v=this._tree[s-1]||0,m=s,_=0;m<=l;++m)v+=i[_++],m===l&&(c=v-this._tree[l]),this._tree[m]=v;for(var g=l+1;g<this._tree.length;++g)this._tree[g]+=c}f("modified tree:",this._tree.slice())}},{key:"sumAt",value:function(e){return this.sumBetween(0,e)}},{key:"sumBetween",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._tree.length-1;return this._revertedTree?this._tree[e]-(this._tree[t+1]||0):this._tree[t]-(this._tree[e-1]||0)}},{key:"extendBy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f("adding "+e+" elements"),this._tree=this._tree.concat(Array(e).fill(0));var i=Array(e).fill(t);this.update({from:this._tree.length-e,to:this._tree.length-1,values:i})}},{key:"reduceBy",value:function(e){if(f("reducing by "+e+" elements"),this._revertedTree)for(var t=this._tree[this._tree.length-e],i=this._tree.length-e-1;i>=0;--i)this._tree[i]-=t;this._tree.splice(-e)}},{key:"setPerformanceMode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.descending;this._revertedTree=t===e.descending}},{key:"clear",value:function(){this._tree=[]}},{key:"_assertEqual",value:function(e,t,i){e!==t&&console.error(e,t,i)}}]),e}();v.descending=1,v.ascending=2;var m={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.mainTag,{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:e.handleVisibilityChange,expression:"handleVisibilityChange"}],tag:"component",staticClass:"virtual-scroller",class:e.cssClass,on:{"&scroll":function(t){e.handleScroll(t)}}},[e._t("before-container"),e._v(" "),i(e.containerTag,{ref:"itemContainer",tag:"component",staticClass:"virtual-scroller__item-container",class:e.containerClass,style:e.itemContainerStyle},[e._t("before-content"),e._v(" "),i(e.contentTag,{ref:"items",tag:"component",staticClass:"virtual-scroller__items",class:e.contentClass,style:e.itemsStyle},[e.renderers?e._l(e.visibleItems,function(t,n){return i(e.renderers[t[e.typeField]],{key:e.keysEnabled&&t[e.keyField]||void 0,tag:"component",staticClass:"virtual-scroller__item",attrs:{item:t,"item-index":e.$_startIndex+n}})}):[e._l(e.visibleItems,function(t,i){return e._t("item",null,{item:t,itemIndex:e.$_startIndex+i,itemKey:e.keysEnabled&&t[e.keyField]||void 0})})]],2),e._v(" "),e._t("after-content")],2),e._v(" "),e._t("after-container"),e._v(" "),i("resize-observer",{on:{notify:e.handleResize}})],2)},staticRenderFns:[],name:"virtual-scroller",components:{ResizeObserver:n},directives:{ObserveVisibility:o},props:{items:{type:Array,required:!0},renderers:{default:null},itemHeight:{type:Number,default:null},anyHeight:{type:Boolean,default:!1},typeField:{type:String,default:"type"},keyField:{type:String,default:"id"},heightField:{type:String,default:"height"},mainTag:{type:String,default:"div"},containerTag:{type:String,default:"div"},containerClass:{default:null},contentTag:{type:String,default:"div"},contentClass:{default:null},pageMode:{type:Boolean,default:!1},buffer:{type:[Number,String],default:200},poolSize:{type:[Number,String],default:2e3},prerender:{type:[Number,String],default:0},emitUpdate:{type:Boolean,default:!1},delayPreviousItems:{type:Boolean,default:!1}},data:function(){return{visibleItems:[],itemContainerStyle:null,itemsStyle:null,keysEnabled:!0}},computed:{cssClass:function(){return{"virtual-scroller_mode_page":this.pageMode}},isFloatingItemHeight:function(){return null===this.itemHeight||this.anyHeight}},watch:{items:{handler:function(){this.updateVisibleItems(!0)},deep:!0},pageMode:function(){this.applyPageMode(),this.updateVisibleItems(!0)},itemHeight:"setDirty"},created:function(){this.$_ready=!1,this.$_startIndex=0,this.$_oldScrollTop=null,this.$_oldScrollBottom=null,this.$_offsetTop=0,this.$_height=0,this.$_scrollDirty=!1,this.$_updateDirty=!1,this.$_heights=[],this.$_sumTree=new v,this.$_sumTree.setPerformanceMode(v.descending);var e=parseInt(this.prerender);e>0?(this.visibleItems=this.items.slice(0,e),this.$_length=this.visibleItems.length,this.$_endIndex=this.$_length-1,this.$_skip=!0):(this.$_endIndex=0,this.$_length=0,this.$_skip=!1)},mounted:function(){var e=this;this.applyPageMode(),this.$nextTick(function(){e.updateVisibleItems(!0),e.$_ready=!0})},beforeDestroy:function(){this.removeWindowScroll(),this.$_heights=[],this.$_sumTree.clear()},methods:{getScroll:function(){var e=this.$el,t=void 0;if(this.pageMode){var i=e.getBoundingClientRect(),n=-i.top,s=window.innerHeight;n<0&&(s+=n,n=0),n+s>i.height&&(s=i.height-n),t={top:n,bottom:n+s}}else t={top:e.scrollTop,bottom:e.scrollTop+e.clientHeight};return t.bottom>=0&&t.top<=t.bottom?t:null},updateVisibleItems:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$_updateDirty||(this.$_updateDirty=!0,this.$nextTick(function(){e.$_updateDirty=!1;var i,n,s=e.items.length,r=e.getScroll(),l=e.items;if(r){var o,a,h=parseInt(e.buffer),d=parseInt(e.poolSize),u=~~(r.top/d)*d-h,c=Math.ceil(r.bottom/d)*d+h;if(t||!(u===e.$_oldScrollTop&&c===e.$_oldScrollBottom||e.$_skip)){e.$_oldScrollTop=u,e.$_oldScrollBottom=c;var f=e.computeFrameOptions({scrollTop:u,scrollBottom:c});o=f.startIndex,a=f.endIndex,n=f.offsetTop,i=f.containerHeight,(t||e.$_startIndex!==o||e.$_endIndex!==a||e.$_offsetTop!==n||e.$_height!==i||e.$_length!==s)&&(e.keysEnabled=!(o>e.$_endIndex||a<e.$_startIndex),e.itemContainerStyle={height:i+"px"},e.itemsStyle={marginTop:n+"px"},e.delayPreviousItems?(e.visibleItems=l.slice(e.$_startIndex,a),e.$nextTick(function(){e.visibleItems=l.slice(o,a)})):e.visibleItems=l.slice(o,a),e.emitUpdate&&e.$emit("update",o,a),e.$_startIndex=o,e.$_endIndex=a,e.$_length=s,e.$_offsetTop=n,e.$_height=i,e.isFloatingItemHeight&&e.$nextTick(function(){e.updateDynamicItemsHeights()}))}else e.$_skip=!1}}))},computeFrameOptions:function(e){var t=e.scrollTop,i=e.scrollBottom,n=this.items.length,s=void 0,r=void 0,l=-1,o=-1;if(this.isFloatingItemHeight){this.$_heights.length!==this.items.length&&this.updateHeightsLength();var a=0,h=n-1,d=~~(n/2),u=void 0;do{u=d,this.$_sumTree.sumAt(d)<t?a=d:d<n&&this.$_sumTree.sumAt(d+1)>t&&(h=d),d=~~((a+h)/2)}while(d!==u);for(d<0&&(d=0),l=d,o=d;o<n&&this.$_sumTree.sumAt(o)<i;o++);-1===o?o=this.items.length-1:++o>n&&(o=n),s=this.$_sumTree.sumAt(d-1),r=this.$_sumTree.sumAt(n-1)}else l=~~(t/this.itemHeight),o=Math.ceil(i/this.itemHeight),l<0&&(l=0),o>n&&(o=n),s=l*this.itemHeight,r=n*this.itemHeight;return{startIndex:l,endIndex:o,offsetTop:s,containerHeight:r}},updateHeightsLength:function(){var e=this.items.length-this.$_heights.length;if(e>0){var t=Array(e).fill(this.itemHeight||50);this.$_heights=this.$_heights.concat(t),this.$_sumTree.extendBy(e,this.itemHeight||50)}else this.$_heights.splice(e),this.$_sumTree.reduceBy(Math.abs(e))},updateDynamicItemsHeights:function(){for(var e=this.$refs.items.children,t=!1,i=0,n=this.visibleItems.length;i<n;++i)if(e&&e[i]){var s=e[i].offsetHeight,r=this.$_startIndex+i;this.$_heights[r]!==s&&(t=!0,this.$_heights[r]=s)}var l=[this.$_startIndex,this.$_startIndex+this.visibleItems.length-1],o=l[0],a=l[1];t&&o<a&&this.$_sumTree.update({from:o,to:a,values:this.$_heights.slice(o,a+1)})},scrollToItem:function(e){var t=void 0;t=this.isFloatingItemHeight?this.$_sumTree.sumAt(e-1):e*this.itemHeight,this.$el.scrollTop=t},setDirty:function(){this.$_oldScrollTop=null,this.$_oldScrollBottom=null},applyPageMode:function(){this.pageMode?this.addWindowScroll():this.removeWindowScroll()},addWindowScroll:function(){window.addEventListener("scroll",this.handleScroll,!0),window.addEventListener("resize",this.handleResize)},removeWindowScroll:function(){window.removeEventListener("scroll",this.handleScroll,!0),window.removeEventListener("resize",this.handleResize)},handleScroll:function(){var e=this;this.$_scrollDirty||(this.$_scrollDirty=!0,requestAnimationFrame(function(){e.$_scrollDirty=!1,e.updateVisibleItems()}))},handleResize:function(){this.$emit("resize"),this.$_ready&&this.updateVisibleItems()},handleVisibilityChange:function(e,t){var i=this;this.$_ready&&(e||0!==t.boundingClientRect.width||0!==t.boundingClientRect.height)&&(this.$emit("visible"),this.$nextTick(function(){i.updateVisibleItems()}))}}};var _={version:"1.0.22",install:function(e,t){var i=Object.assign({},{installComponents:!0,componentsPrefix:""},t);i.installComponents&&function(e,t){e.component(t+"virtual-scroller",m)}(e,i.componentsPrefix)}},g=null;return"undefined"!=typeof window?g=window.Vue:"undefined"!=typeof global&&(g=global.Vue),g&&g.use(_),e.VirtualScroller=m,e.default=_,e}({});
